<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.27.1/plotly.min.js"></script>
</head>
<body>
    <div>
        <label for="sampleSize">Stichprobengröße: <span id="sizeValue">1</span></label>
        <input type="range" id="sampleSize" min="1" max="25" value="1">
    </div>
    <div id="plot"></div>

    <script>
        function mulberry32(a) {
            return function() {
                var t = a += 0x6D2B79F5;
                t = Math.imul(t ^ t >>> 15, t | 1);
                t ^= t + Math.imul(t ^ t >>> 7, t | 61);
                return ((t ^ t >>> 14) >>> 0) / 4294967296;
            }
        }

        const rand = mulberry32(42);
        const originalData = Array(1000).fill(0).map(() => -10000 * Math.log(rand()));

        function calculateMeans(n) {
            const means = [];
            for (let i = 0; i < 1000; i++) {
                const sample = [];
                for (let j = 0; j < n; j++) {
                    sample.push(originalData[Math.floor(Math.random() * originalData.length)]);
                }
                means.push(sample.reduce((a, b) => a + b) / n);
            }
            return means;
        }

        function updatePlot() {
            const n = parseInt(document.getElementById('sampleSize').value);
            document.getElementById('sizeValue').textContent = n;

            const means = calculateMeans(n);

            const traces = [
                {
                    x: originalData,
                    type: 'histogram',
                    name: 'Original Data',
                    nbinsx: 100,
                    marker: {color: '#005A9B'},
                    opacity: 0.7
                },
                {
                    x: means,
                    type: 'histogram',
                    name: `Mean of ${n}`,
                    nbinsx: 100,
                    marker: {color: '#E37222'},
                    opacity: 0.7
                }
            ];

            const layout = {
                title: 'Verteilung der Stichprobenmittelwerte',
                barmode: 'overlay',
                xaxis: {title: 'Werte'},
                yaxis: {title: 'Häufigkeit'}
            };

            Plotly.newPlot('plot', traces, layout);
        }

        document.getElementById('sampleSize').addEventListener('input', updatePlot);
        updatePlot();
    </script>
</body>
</html>
